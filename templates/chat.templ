package templates

type ChatMessageParams struct {
    Id string 
    ModelMessage string
    UserMessage string
    Model string
//    Timestamp int
//    Tags []string
    Sender string
}

templ ChatMessage(params ChatMessageParams) {
    <div id="chat-messages" hx-swap-oob="beforeend">
        <div class="chat-message from-user">
            <div class="chat-message-model">user:</div>
            { params.UserMessage }
        </div>
        <div id={ "response-" + params.Id } class="chat-message from-model">
            <div class="chat-message-model">{ params.Model }:</div>
        </div>
    </div>
}

templ ChatStreamChunk(id string, chunk string) {
    <div id={"response-" + id } hx-swap-oob="beforeend"> { chunk } </div>
}

type LoadedMessageParams struct {
    Id string `db:"id" json:"id"`
    Message string `db:"message" json:"message"`
    Model string `db:"model" json:"model"`
//    Timestamp int
//    Tags []string
    Sender string `db:"sender" json:"sender"`
}

templ LoadedThread(messages []LoadedMessageParams) {
   for _, message := range messages {
       if (message.Sender == "human") {
            <div class="chat-message from-user">
                <div class="chat-message-model"><i>user:</i></div>
                { message.Message }
            </div>
       } else if (message.Sender == "model") {
            <div id={ message.Id } class="chat-message from-model">
                <div class="chat-message-model"><i>{ message.Model }:</i></div>
                { message.Message }
            </div>
       }
   }
}
