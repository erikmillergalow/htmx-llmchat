package templates

type ModelParams struct {
    Id string `db:"id" json:"id"`
    Name string `db:"name" json:"name"`
    Url string `db:"url" json:"url"`
    ApiKey string `db:"api_key" json:"api_key"`
    ApiModelName string `db:"api_model_name" json:"api_model_name"`
    Color string `db:"color" json:"color"`
}

templ SelectModelStatus(msg string) {
    <p class="select-model-status" _="on load wait 2s transition opacity to 0 then remove me">{ msg }</p>
}

templ NewModelEditor(params ModelParams) {
    <div
        id="model-editors-list"
        hx-swap-oob="afterbegin"
    >
        @ModelEditor(params)
    </div>
}

templ ModelEditor(params ModelParams) {
    <form
        hx-post={ "/models/update/" + params.Id}
        hx-target="this"
        hx-swap="beforeend"
        id={ "model-editor-" + params.Id }
        class="model-editor"
    >
        <label class="model-label">Display name:</label>
        <input
            id={ "model-name-" + params.Id }
            name="display-name"
            class="model-input"
            placeholder="Enter display name..."
            value={ params.Name }
        ></input>

        <label class="model-label">URL:</label>
        <input
            id={ "model-url-" + params.Id }
            name="url"
            class="model-input"
            placeholder="Enter URL..."
            value={ params.Url }
        ></input>

        <label class="model-label">API key:</label>
        <input
            id={ "model-key-" + params.Id }
            name="api-key"
            class="model-input"
            placeholder="Enter API key..."
            type="password"
            value={ params.ApiKey }
        ></input>

        <label class="model-label">API model name:</label>
        <input
            id={ "model-api-name-" + params.Id }
            name="api-model-name"
            class="model-input"
            placeholder="Enter API-defined model name..."
            value={ params.ApiModelName }
        ></input>

        <label class="model-label">Color:</label>
        <input
            id={ "model-color" + params.Id }
            name="color"
            class="model-input"
            type="color"
            value={ params.Color }
        ></input>

        <button
            class="model-submit-button"
        >
            Update
        </button>
    </form>
}

templ ModelUpdateResult() {
    <p
        class="model-update-result"
        _="on load wait 2s transition opacity to 0 then remove me"
    >
        Model updated!
    </p>
}

templ ModelEditorsList(paramsList []ModelParams) {
    <div class="models-menu">
        <button
            hx-post="/models/create"
            hx-trigger="click"
            hx-target="#model-editors-list"
            hx-swap="none"
            class="create-model-button"
        >
            Add new model
        </button>
        <div id="model-editors-list">
            for _, params := range paramsList {
                @ModelEditor(params)
            }
        </div>
    </div>
}
